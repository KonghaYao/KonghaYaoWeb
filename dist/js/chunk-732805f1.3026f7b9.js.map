{"version":3,"sources":["webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/component/marker/MarkerModel.js","webpack:///./node_modules/echarts/lib/model/referHelper.js","webpack:///./node_modules/echarts/lib/chart/helper/createListFromArray.js","webpack:///./node_modules/echarts/lib/coord/CoordinateSystem.js","webpack:///./node_modules/echarts/lib/component/marker/MarkerView.js","webpack:///./node_modules/echarts/lib/component/marker/markerHelper.js","webpack:///./node_modules/echarts/lib/component/marker/MarkLineModel.js","webpack:///./node_modules/echarts/lib/chart/helper/LinePath.js","webpack:///./node_modules/echarts/lib/chart/helper/Line.js","webpack:///./node_modules/echarts/lib/chart/helper/LineDraw.js","webpack:///./node_modules/echarts/lib/component/marker/MarkLineView.js","webpack:///./node_modules/echarts/lib/component/marker/installMarkLine.js","webpack:///./node_modules/echarts/lib/component/marker/MarkPointModel.js","webpack:///./node_modules/echarts/lib/component/marker/MarkPointView.js","webpack:///./node_modules/echarts/lib/component/marker/installMarkPoint.js","webpack:///./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack:///./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack:///./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack:///./node_modules/echarts/lib/processor/dataSample.js"],"names":["Symbol","_super","data","idx","seriesScope","opts","_this","call","this","updateData","prototype","_createSymbol","symbolType","symbolSize","keepAspect","removeAll","symbolPath","attr","z2","culling","scaleX","scaleY","drift","driftSymbol","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","getItemVisual","seriesModel","hostModel","getSymbolSize","isInit","disableAnimation","target","_updateCommon","_sizeX","_sizeY","style","opacity","_seriesModel","emphasisItemStyle","blurItemStyle","selectItemStyle","focus","blurScope","symbolOffset","labelStatesModels","hoverScale","cursorStyle","hasItemOption","itemModel","getItemModel","emphasisModel","getModel","getItemStyle","get","getShallow","symbolRotate","Math","PI","x","y","symbolStyle","visualColor","fill","pathStyle","useStyle","image","width","height","__isEmptyBrush","decal","setColor","symbolInnerColor","strokeNoScale","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","getName","labelFetcher","labelDataIndex","defaultText","inheritColor","defaultOpacity","emphasisState","ensureState","scaleRatio","max","setSymbolScale","scale","fadeOut","cb","opt","dataIndex","animationOpt","animation","fadeLabel","textContent","getTextContent","removeOpt","removeTextContent","Array","slice","dx","dy","parent","fillLabel","inner","MarkerModel","apply","arguments","type","createdBySelf","init","option","parentModel","ecModel","mergeDefaultAndTheme","_mergeOption","isAnimationEnabled","node","hostSeries","__hostSeries","mergeOption","newOpt","componentType","mainType","eachSeries","markerOpt","markerModel","item","createMarkerModelFromSeries","seriesIndex","name","formatTooltip","multipleSeries","dataType","getData","value","getRawValue","itemName","header","blocks","noName","noValue","_data","setData","getMarkerModelFromSeries","dependencies","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","result","fetch","fetchers","cartesian2d","xAxisModel","getReferringComponents","models","yAxisModel","set","isCategory","firstCategoryDimIndex","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","geo","parallel","parallelModel","getComponent","dimensions","parallelAxisIndex","axisIndex","index","axisModel","axisDim","createListFromArray","source","coordSysDimDefs","registeredCoordSys","CoordinateSystem","coordSysInfo","dim","dimInfo","axisType","getDimensionsInfo","hasNameEncode","useEncodeDefaulter","dimInfoList","createDimensions","coordDimensions","generateCoord","encodeDefaulter","dimIndex","coordDim","categoryAxisModel","ordinalMeta","getOrdinalMeta","createInvertedIndices","otherDims","stackCalculationInfo","list","List","setCalculationInfo","dimValueGetter","isNeedCompleteOrdinalData","itemOpt","dimName","defaultDimValueGetter","initData","sourceFormat","sampleItem","firstDataNotNull","i","length","isCoordinateSystemType","coordSys","MarkerView","markerGroupMap","render","api","each","keep","renderSeries","group","remove","markKeep","drawGroup","blurSeries","seriesModelList","eachItemGraphicEl","el","hasXOrY","isNaN","parseFloat","hasXAndY","markerTypeCalculatorWithExtent","markerType","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","stacked","calcDataDim","getCalculationInfo","numCalculate","indicesOfNearest","coordArrValue","precision","min","toFixed","markerTypeCalculator","average","median","dataTransform","coordinateSystem","coord","dims","axisInfo","getAxisInfo","baseAxis","valueAxis","coordInfo","baseDataDim","valueDataDim","xAxis","radiusAxis","yAxis","angleAxis","mapDimension","ret","valueIndex","valueDim","getDimension","getAxis","dataDimToCoordDim","getOtherAxis","getBaseAxis","dataDim","dimItem","getDimensionInfo","dataFilter","containData","sum_1","count_1","val","getMedian","getDataExtent","MarkLineModel","masterMarkerModel","defaultOption","symbol","tooltip","trigger","label","show","position","distance","lineStyle","emphasis","animationEasing","straightLineProto","bezierCurveProto","StraightLineShape","x1","y1","x2","y2","percent","CurveShape","isStraightLine","shape","cpx1","cpy1","ECLinePath","getDefaultStyle","stroke","getDefaultShape","buildPath","ctx","pointAt","t","tangentAt","p","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","createSymbol","lineData","symbolSizeArr","__specifiedRotation","createLine","points","line","subPixelOptimize","setLinePoints","targetShape","cp1","NaN","Line","_createLine","linePoints","getItemLayout","graphic","_updateCommonStl","childOfName","key","getLinePath","emphasisLineStyle","blurLineStyle","selectLineStyle","getLineStyle","stateName","lineState","getState","lineStateStyle","state","stateStyle","markRedraw","rawVal","getFormattedLabel","isFinite","labelNormalModel","normal","__align","align","__verticalAlign","verticalAlign","__position","__labelDistance","setTextConfig","local","inside","updateLayout","linePath","dirty","beforeUpdate","lineGroup","symbolFrom","symbolTo","ignore","invScale","parentNode","__dirty","fromPos","toPos","d","vector","setPosition","setSymbolRotation","originX","originY","textAlign","textVerticalAlign","distanceX","distanceY","halfPercent","tangent","n","cp","dir","rotation","atan2","setStyle","specifiedRotation","LineDraw","LineCtor","_LineCtor","isPersistent","lineDraw","oldLineData","_lineData","makeSeriesScope","diff","_doAdd","update","newIdx","oldIdx","_doUpdate","getItemGraphicEl","execute","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","isEffectObject","incremental","hoverLayer","start","end","itemLayout","lineNeedsDraw","traverse","setItemGraphicEl","newLineData","itemEl","animators","isPointNaN","pt","pts","markLineTransform","mlModel","itemArray","mlType","markerHelper","baseIndex","mlFrom","mlTo","Infinity","normalizedItem","isInifinity","ifMarkLineHasOnlyDim","fromCoord","toCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","isFrom","point","xPx","number","getWidth","yPx","getHeight","getMarkerPosition","getValues","dataToPoint","toGlobalCoord","getExtent","setItemLayout","MarkLineView","updateTransform","markLineModel","mlData_1","fromData_1","from","toData_1","to","id","seriesId","seriesData","lineDrawMap","mlData","createList","fromData","toData","updateDataVisualAndLayout","setItemVisual","fromSymbolRotate","fromSymbolSize","fromSymbol","toSymbolRotate","toSymbolSize","toSymbol","child","dataModel","coordDimsInfos","info","optData","install","registers","registerComponentModel","registerComponentView","registerPreprocessor","markLine","MarkPointModel","itemStyle","borderWidth","updateMarkerLayout","mpData","MarkPointView","markPointModel","mpModel","symbolDrawMap","symbolDraw","SymbolDraw","rawIdx","dataParams","getDataParams","color","dataOpt","markPoint","createGridClipPath","cartesian","hasAnimation","done","during","rect","getArea","lineWidth","floor","round","clipPath","isHorizontal","isAxisInversed","inverse","duringCb","createPolarClipPath","sectorArea","r0","r","cx","cy","startAngle","endAngle","clockwise","isRadial","createClipPath","getDefaultLabel","labelDims","mapDimensionsAll","len","vals","push","join","getDefaultInterpolatedLabel","interpolatedValue","symbolNeedsDraw","isIgnore","clipShape","contain","normalizeUpdateOpt","SymbolCtor","_SymbolCtor","oldData","symbolUpdateOpt","getSymbolPoint","symbolEl","_getSymbolPoint","enableAnimation","samplers","frame","sum","count","nearest","indexSampler","dataSample","seriesType","reset","sampling","extent","dpr","getDevicePixelRatio","size","abs","rate","lttbDownSample","sampler","downSample"],"mappings":"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","file":"js/chunk-732805f1.3026f7b9.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol } from '../../util/symbol';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis } from '../../util/states';\nimport { parsePercent } from '../../util/number';\nimport { getDefaultLabel } from './labelHelper';\nimport { extend } from 'zrender/lib/core/util';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\n\nvar Symbol =\n/** @class */\nfunction (_super) {\n  __extends(Symbol, _super);\n\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n\n\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n\n\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n\n\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  Symbol.prototype.setDraggable = function (draggable) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop remove animation manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('remove');\n    }\n\n    this._seriesModel = seriesModel;\n  };\n\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var symbolOffset;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      symbolOffset = seriesScope.symbolOffset;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      symbolOffset = itemModel.getShallow('symbolOffset');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n    if (symbolOffset) {\n      symbolPath.x = parsePercent(symbolOffset[0], symbolSize[0]);\n      symbolPath.y = parsePercent(symbolOffset[1], symbolSize[1]);\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n\n    if (hoverScale) {\n      var scaleRatio = Math.max(1.1, 3 / this._sizeY);\n      emphasisState.scaleX = this._sizeX * scaleRatio;\n      emphasisState.scaleY = this._sizeY * scaleRatio;\n    }\n\n    this.setSymbolScale(1);\n    enableHoverEmphasis(this, focus, blurScope);\n  };\n\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  Symbol.prototype.fadeOut = function (cb, opt) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = this._seriesModel;\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  Symbol.getSymbolSize = function (data, idx) {\n    var symbolSize = data.getItemVisual(idx, 'symbolSize');\n    return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n  };\n\n  return Symbol;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport ComponentModel from '../../model/Component';\nimport { makeInner, defaultEmphasis } from '../../util/model';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\n\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n} // { [componentType]: MarkerModel }\n\n\nvar inner = makeInner();\n\nvar MarkerModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkerModel, _super);\n\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerModel.type;\n    /**\n     * If marker model is created by self from series\n     */\n\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._mergeOption(option, ecModel, false, true);\n  };\n\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel); // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel, // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\n\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util';\nimport { SINGLE_REFERRING } from '../util/model';\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\n\nvar CoordSysInfo =\n/** @class */\nfunction () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n\n  return CoordSysInfo;\n}();\n\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  }\n};\n\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport List from '../../data/List';\nimport createDimensions from '../../data/helper/createDimensions';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { getDataItemValue } from '../../util/model';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../../data/Source';\nimport { enableDataStack } from '../../data/helper/dataStackHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types';\n\nfunction createListFromArray(source, seriesModel, opt) {\n  opt = opt || {};\n\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs;\n\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType); // dimInfo.stackable = isStackable(axisType);\n      }\n\n      return dimInfo;\n    });\n  }\n\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var dimInfoList = createDimensions(source, {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefaulter: zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null\n  });\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n\n      if (opt.createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n\n  var stackCalculationInfo = enableDataStack(seriesModel, dimInfoList);\n  var list = new List(dimInfoList, seriesModel);\n  list.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  list.hasItemOption = false;\n  list.initData(source, null, dimValueGetter);\n  return list;\n}\n\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return sampleItem != null && !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\n\nfunction firstDataNotNull(data) {\n  var i = 0;\n\n  while (i < data.length && data[i] == null) {\n    i++;\n  }\n\n  return data[i];\n}\n\nexport default createListFromArray;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { enterBlur } from '../../util/states';\nvar inner = makeInner();\n\nvar MarkerView =\n/** @class */\nfunction (_super) {\n  __extends(MarkerView, _super);\n\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerView.type;\n    return _this;\n  }\n\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n\n  MarkerView.prototype.blurSeries = function (seriesModelList) {\n    var _this = this;\n\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            enterBlur(el);\n          }\n        });\n      }\n    });\n  };\n\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\n\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../../util/number';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util';\n\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\n\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n} // Make it simple, do not visit all stacked value to count precision.\n// function getPrecision(data, valueAxisDim, dataIndex) {\n//     let precision = -1;\n//     let stackedDim = data.mapDimension(valueAxisDim);\n//     do {\n//         precision = Math.max(\n//             numberUtil.getPrecision(data.get(stackedDim, dataIndex)),\n//             precision\n//         );\n//         let stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n//         if (stackedOnSeries) {\n//             let byValue = data.get(data.getCalculationInfo('stackedByDimension'), dataIndex);\n//             data = stackedOnSeries.getData();\n//             dataIndex = data.indexOf(data.getCalculationInfo('stackedByDimension'), byValue);\n//             stackedDim = data.getCalculationInfo('stackedDimension');\n//         }\n//         else {\n//             data = null;\n//         }\n//     } while (data);\n//     return precision;\n// }\n\n\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim\n  /*, otherDataDim*/\n  );\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex); // Make it simple, do not visit all stacked value to count precision.\n\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n\n  return [coordArr, coordArrValue];\n} // TODO Specified percent\n\n\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n * @param  {module:echarts/model/Series} seriesModel\n * @param  {module:echarts/coord/*} [coordSys]\n * @param  {Object} item\n * @return {Object}\n */\n\nexport function dataTransform(seriesModel, item) {\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem; // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n\n  if (item && !hasXAndY(item) && !isArray(item.coord) && coordSys) {\n    var dims = coordSys.dimensions;\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel); // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n\n    item = clone(item);\n\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0]; // Force to use the value of calculated value.\n      // let item use the value without stack.\n\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      var coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis]; // Each coord support max, min, average\n\n      for (var i = 0; i < 2; i++) {\n        if (markerTypeCalculator[coord[i]]) {\n          coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n        }\n      }\n\n      item.coord = coord;\n    }\n  }\n\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n\n  return ret;\n}\n\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var data = seriesModel.getData();\n  var dimensions = data.dimensions;\n  dataDim = data.getDimension(dataDim);\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimItem = data.getDimensionInfo(dimensions[i]);\n\n    if (dimItem.name === dataDim) {\n      return dimItem.coordDim;\n    }\n  }\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n */\n\n\nexport function dataFilter( // Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Alwalys return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function dimValueGetter(item, dimName, dataIndex, dimIndex) {\n  // x, y, radius, angle\n  if (dimIndex < 2) {\n    return item.coord && item.coord[dimIndex];\n  }\n\n  return item.value;\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkLineModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineModel, _super);\n\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    //symbolRotate: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\n\nexport default MarkLineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\n\nimport * as graphic from '../../util/graphic';\nimport * as vec2 from 'zrender/lib/core/vector';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nvar StraightLineShape =\n/** @class */\nfunction () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0; // End point\n\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n\n  return StraightLineShape;\n}();\n\nvar CurveShape =\n/** @class */\nfunction (_super) {\n  __extends(CurveShape, _super);\n\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return CurveShape;\n}(StraightLineShape);\n\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar ECLinePath =\n/** @class */\nfunction (_super) {\n  __extends(ECLinePath, _super);\n\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-line';\n    return _this;\n  }\n\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n\n  return ECLinePath;\n}(graphic.Path);\n\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as vector from 'zrender/lib/core/vector';\nimport * as symbolUtil from '../../util/symbol';\nimport ECLinePath from './LinePath';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle';\nimport { round } from '../../util/number';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolSizeArr = zrUtil.isArray(symbolSize) ? symbolSize : [symbolSize, symbolSize];\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2, -symbolSizeArr[1] / 2, symbolSizeArr[0], symbolSizeArr[1]);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nvar Line =\n/** @class */\nfunction (_super) {\n  __extends(Line, _super);\n\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createLine(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  }; // TODO More strict on the List type in parameters?\n\n\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = lineData.getItemVisual(idx, symbolCategory);\n      var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n\n      this[key] = symbolType;\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels; // Optimization for large dataset\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      emphasisLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle; // Update symbol\n\n    zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent(); // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign; // 'start', 'middle', 'end'\n\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n\n      if (!zrUtil.isArray(distance)) {\n        distance = [distance, distance];\n      }\n\n      label.__labelDistance = distance;\n    }\n\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n\n    });\n    enableHoverEmphasis(this);\n  };\n\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent(); // Quick reject\n\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n\n    var invScale = 1;\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    var line = lineGroup.childOfName('line'); // If line not changed\n    // FIXME Parent scale changed\n\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n\n      var dir = tangent[0] < 0 ? -1 : 1;\n\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.rotation = rotation;\n      }\n\n      var dy = void 0;\n\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n\n  return Line;\n}(graphic.Group);\n\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport LineGroup from './Line';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nvar LineDraw =\n/** @class */\nfunction () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n\n  LineDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!oldLineData) {\n      group.removeAll();\n    }\n\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n\n  ;\n\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData; // Do not support update layout in incremental mode.\n\n    if (!lineData) {\n      return;\n    }\n\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n\n  return LineDraw;\n}();\n\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\n\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: hostModel.getModel(['emphasis', 'lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\n\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport List from '../../data/List';\nimport * as numberUtil from '../../util/number';\nimport * as markerHelper from './markerHelper';\nimport LineDraw from '../../chart/helper/LineDraw';\nimport MarkerView from './MarkerView';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { getECData } from '../../util/innerStore';\nimport MarkerModel from './MarkerModel';\nimport { isArray, retrieve, clone, extend, logError, merge, map, defaults, curry, filter } from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nimport { getVisualFromData } from '../../visual/helper';\nvar inner = makeInner();\n\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median' // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex; // Normized to 2d data with start and end point\n\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n\n      if (precision >= 0 && typeof value === 'number') {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])]; // Avoid line data type is extended by from(to) data type\n\n  normalizedItem[2].type = normalizedItem[2].type || null; // Merge from option and to option into line option\n\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markLine has one dim\n\n\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\n\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord; // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\n\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    } // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n\n      if (isInifinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInifinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  data.setItemLayout(idx, point);\n}\n\nvar MarkLineView =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineView, _super);\n\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to; // Update visual and layout of from symbol and to symbol\n\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        }); // Update layout of line\n\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData; // Line data for tooltip and formatter\n\n    mlModel.setData(lineData);\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    } // Update visual and layout of from symbol and to symbol\n\n\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    }); // Update visual and layout of line\n\n    lineData.each(function (idx) {\n      var lineStyle = lineData.getItemModel(idx).getModel('lineStyle').getLineStyle(); // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n\n      lineData.setItemVisual(idx, {\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData); // Set host model for tooltip\n    // FIXME\n\n    mlData.line.eachItemGraphicEl(function (el, idx) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n\n      data.setItemVisual(idx, {\n        symbolRotate: itemModel.get('symbolRotate'),\n        symbolSize: itemModel.get('symbolSize') || symbolSize[isFrom ? 0 : 1],\n        symbol: itemModel.get('symbol', true) || symbolType[isFrom ? 0 : 1],\n        style: style\n      });\n    }\n\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return defaults({\n        name: coordDim\n      }, info);\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var fromData = new List(coordDimsInfos, mlModel);\n  var toData = new List(coordDimsInfos, mlModel); // No dimensions\n\n  var lineData = new List([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  };\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\n\nexport default MarkLineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport MarkLineModel from './MarkLineModel';\nimport MarkLineView from './MarkLineView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    // Make sure markLine component is enabled\n    opt.markLine = opt.markLine || {};\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkPointModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointModel, _super);\n\n  function MarkPointModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointModel.type;\n    return _this;\n  }\n\n  MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkPointModel.type = 'markPoint';\n  MarkPointModel.defaultOption = {\n    zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    //symbolRotate: 0,\n    //symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'inside'\n    },\n    itemStyle: {\n      borderWidth: 2\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return MarkPointModel;\n}(MarkerModel);\n\nexport default MarkPointModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../../chart/helper/SymbolDraw';\nimport * as numberUtil from '../../util/number';\nimport List from '../../data/List';\nimport * as markerHelper from './markerHelper';\nimport MarkerView from './MarkerView';\nimport MarkerModel from './MarkerModel';\nimport { isFunction, map, defaults, filter, curry } from 'zrender/lib/core/util';\nimport { getECData } from '../../util/innerStore';\nimport { getVisualFromData } from '../../visual/helper';\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n        // Use the getMarkerPoisition\n        point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n      } else if (coordSys) {\n        var x = mpData.get(coordSys.dimensions[0], idx);\n        var y = mpData.get(coordSys.dimensions[1], idx);\n        point = coordSys.dataToPoint([x, y]);\n      } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar MarkPointView =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointView, _super);\n\n  function MarkPointView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointView.type;\n    return _this;\n  }\n\n  MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createList(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbol = itemModel.getShallow('symbol');\n      var symbolSize = itemModel.getShallow('symbolSize');\n      var symbolRotate = itemModel.getShallow('symbolRotate');\n\n      if (isFunction(symbol) || isFunction(symbolSize) || isFunction(symbolRotate)) {\n        var rawIdx = mpModel.getRawValue(idx);\n        var dataParams = mpModel.getDataParams(idx);\n\n        if (isFunction(symbol)) {\n          symbol = symbol(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolSize)) {\n          // FIXME  ECharts 2.x2.x \n          symbolSize = symbolSize(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolRotate)) {\n          symbolRotate = symbolRotate(rawIdx, dataParams);\n        }\n      }\n\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n      }\n\n      mpData.setItemVisual(idx, {\n        symbol: symbol,\n        symbolSize: symbolSize,\n        symbolRotate: symbolRotate,\n        style: style\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mpModel;\n      });\n    });\n    this.markKeep(symbolDraw);\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkPointView.type = 'markPoint';\n  return MarkPointView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return defaults({\n        name: coordDim\n      }, info);\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new List(coordDimsInfos, mpModel);\n  var dataOpt = map(mpModel.get('data'), curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = filter(dataOpt, curry(markerHelper.dataFilter, coordSys));\n  }\n\n  mpData.initData(dataOpt, null, coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  });\n  return mpData;\n}\n\nexport default MarkPointView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport MarkPointModel from './MarkPointModel';\nimport MarkPointView from './MarkPointView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkPointModel);\n  registers.registerComponentView(MarkPointView);\n  registers.registerPreprocessor(function (opt) {\n    // Make sure markPoint component is enabled\n    opt.markPoint = opt.markPoint || {};\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport { round } from '../../util/number';\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n\n      clipPath.shape.height = 0;\n    }\n\n    var duringCb = typeof during === 'function' ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n\n  return null;\n}\n\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider';\nimport { isArray } from 'zrender/lib/core/util';\n/**\n * @return label string. Not null/undefined\n */\n\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n\n  var vals = [];\n\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimInfo = data.getDimensionInfo(labelDims[i]);\n\n    if (dimInfo) {\n      vals.push(interpolatedValue[dimInfo.index]);\n    }\n  }\n\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport SymbolClz from './Symbol';\nimport { isObject } from 'zrender/lib/core/util';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      if (!symbolEl) {\n        symbolEl = new SymbolCtor(data, newIdx);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      });\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\n\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n\n        if (rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n\n          var sampler = void 0;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}"],"sourceRoot":""}