(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-449a09fd"],{"2abe":function(e,t,i){"use strict";i("bdb7")},"980b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:59!==e.PosData.length,expression:"PosData.length !== 59"}],staticClass:"main"},[i("div",{ref:"map",staticClass:"map"}),59==e.PosData.length&&e.timeline?i("div",{staticClass:"name title"},[e._v(" "+e._s(e.tooltips.举办国家)+" "+e._s(e.tooltips.主办城市)+" ")]):e._e(),59==e.PosData.length&&e.timeline?i("div",{staticClass:"tooltips"},[i("div",{staticClass:"textBox"},[i("div",{staticClass:"title",staticStyle:{"font-size":"1em"}},[e._v(" "+e._s(e.tooltips.届数)+e._s(e.tooltips.Year<1923?"":"Summer"==e.tooltips.Season?"夏季":"冬季")+"奥运会 ")]),i("div",{staticClass:"title",staticStyle:{"border-bottom":"1px solid #636363"}},[e._v(" "+e._s(e.tooltips.Year+"年"+e.tooltips.主办城市+"奥运会")+" ")]),i("div",{staticClass:"simple"},[e._v(e._s(e.tooltips.举办时间))]),i("div",{staticClass:"simple"},[e._v(" "+e._s(e.tooltips.举办国家)+" "+e._s(e.tooltips.主办城市)+" ")]),i("div",{staticClass:"simple"},[e._v(e._s(e.tooltips.口号||""))])]),i("router-link",{staticClass:"link",attrs:{to:{path:encodeURI("/奥运风采馆/奥运会介绍/每年奖牌趋势"),query:{Season:e.tooltips.Season,Year:e.tooltips.Year,Medal:"Gold",opened:!0}}}},[e._v(" 查看图表详情 ")]),i("div",{staticClass:"control"},[i("div",{staticClass:"row"},[i("div",{staticClass:"simple"},[e._v("播放控制")]),i("i",{class:{icon:!0,"el-icon-video-pause":!e.timeline.paused,"el-icon-video-play":e.timeline.paused},attrs:{circle:""},on:{click:e.timeline.toggle}})]),i("div",{staticClass:"simple"},[e._v("时间轴")]),i("div",{staticClass:"timeline"},[i("i",{staticClass:"el-icon-d-arrow-left icon"}),i("el-slider",{staticClass:"slider",attrs:{min:0,max:e.timeline.list.length,step:1,"format-tooltip":e.formatTooltip},on:{change:e.changeSlider},model:{value:e.timeline.now,callback:function(t){e.$set(e.timeline,"now",t)},expression:"timeline.now"}}),i("i",{staticClass:"el-icon-d-arrow-right icon"})],1)])],1):e._e()])},s=[],o=i("1da1"),a=i("2909");i("96cf"),i("d3b7"),i("d81d"),i("159b"),i("ddb0");function l(e,t){return new Promise((function(i){return setTimeout((function(){i(t&&t())}),e)}))}var r={data:function(){return{dataset:{},PosData:[],timeline:{now:0}}},watch:{PosData:function(e){59===e.length&&this.animeInit()}},computed:{tooltips:function(){return this.dataset[this.timeline.now]}},methods:{changeSlider:function(){this.$notify({type:"success",message:"下一个目的地就是您想要的位置哦，请稍等！",title:"提示"}),this.timeline.play()},formatTooltip:function(e){return this.dataset[e].Year+("Summer"==this.dataset[e].Season?"夏":"冬")},init:function(){var e=this;return new Promise((function(t){var i=new BMapGL.Map(e.$refs.map);e.map=i,i.centerAndZoom(new BMapGL.Point(116.404,39.915),2),i.addControl(new BMapGL.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),i.disableDragging(),i.disableScrollWheelZoom(),e.map.addEventListener("tilesloaded",(function(){t()}))}))},animeInit:function(){var e=this;this.timeline={list:this.PosData.map((function(t){t.point=new BMapGL.Point(t.point.lng,t.point.lat);var i=new BMapGL.Marker(t.point);return e.map.addOverlay(i),t.point})),now:0,paused:!1,promise:new Promise((function(e){return e()})),play:function(){if(!e.timeline.paused)return null;e.timeline.promise.then((function(){e.timeline.paused=!1,e.timeline.promise=e.timeline.moveTo(1),Object(a["a"])(Array(e.timeline.list.length-e.timeline.now-2).keys()).forEach((function(t){e.timeline.promise=e.timeline.promise.then((function(){return e.timeline.moveTo(1)}))}))}))},pause:function(){e.timeline.paused=!0},toggle:function(){e.$notify({type:"success",message:e.timeline.paused?"动画开始咯！":"动画暂停啦！",title:"提示"}),e.timeline.paused?e.timeline.play():e.timeline.pause()},restart:function(){e.timeline.promise.then((function(){e.timeline.now=-1;var t=e.timeline.moveTo(1);e.timeline.promise=t,Object(a["a"])(Array(e.timeline.list.length-2).keys()).forEach((function(i){t=t.then((function(){return e.timeline.moveTo(1)}))}))}))},moveTo:function(t,i){if(e.timeline.paused)return new Promise((function(e){return e(!1)}));void 0===i&&(i=e.timeline.now);var n=i+t;n=n>=0?n<e.timeline.list.length?n:e.timeline.list.length-1:0,console.log(n);var s=e.timeline.list[n],o=new BMapGL.Circle(s,5e4,{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});return e.map.addOverlay(o),e.timeline.now++,e.map.centerAndZoom(s,2),l(2e3,(function(){return e.map.centerAndZoom(s,10)})).then((function(){return l(1e4,(function(){e.map.removeOverlay(o)})),l(9e3)}))}},window.timeline=this.timeline,this.timeline.restart()}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("./奥运会赛事统一数据最终添加赛事介绍.json",{cache:"force-cache"}).then((function(e){return e.json()}));case 2:return e.dataset=t.sent,t.next=5,e.init();case 5:return t.next=7,fetch("./地理位置.json",{cache:"force-cache"}).then((function(e){return e.json()}));case 7:e.PosData=t.sent,console.log(e.PosData);case 9:case"end":return t.stop()}}),t)})))()}},c=r,m=(i("2abe"),i("2877")),u=Object(m["a"])(c,n,s,!1,null,"3e4b25b0",null);t["default"]=u.exports},bdb7:function(e,t,i){}}]);