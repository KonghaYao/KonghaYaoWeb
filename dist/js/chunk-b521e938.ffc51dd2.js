(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b521e938"],{"104d":function(e,t,a){"use strict";a("9786")},"31ae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"sunchart",staticClass:"echarts",staticStyle:{width:"800px",height:"500px",margin:"0 auto"}})},i=[],r=a("3835"),o=a("1da1"),l=(a("96cf"),a("d3b7"),a("07ac"),a("13d5"),a("4fad"),a("d81d"),a("1984")),s=a("22b4"),c=a("1be7"),u=a("9394"),h=a("ff32"),g=a("2da7"),d=a("f3bb"),p=a("3842"),f=a("f934"),b=a("6d8b"),m=2*Math.PI,v=Math.PI/180;function y(e,t){return f["d"](e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function x(e,t,a){t.eachSeriesByType(e,(function(e){var t=e.getData(),n=t.mapDimension("value"),i=y(e,a),r=e.get("center"),o=e.get("radius");b["r"](o)||(o=[0,o]),b["r"](r)||(r=[r,r]);var l=Object(p["n"])(i.width,a.getWidth()),s=Object(p["n"])(i.height,a.getHeight()),c=Math.min(l,s),u=Object(p["n"])(r[0],l)+i.x,h=Object(p["n"])(r[1],s)+i.y,g=Object(p["n"])(o[0],c/2),d=Object(p["n"])(o[1],c/2),f=-e.get("startAngle")*v,x=e.get("minAngle")*v,w=0;t.each(n,(function(e){!isNaN(e)&&w++}));var O=t.getSum(n),j=Math.PI/(O||w)*2,A=e.get("clockwise"),M=e.get("roseType"),S=e.get("stillShowZeroSum"),L=t.getDataExtent(n);L[0]=0;var D=m,N=0,T=f,I=A?1:-1;if(t.setLayout({viewRect:i,r:d}),t.each(n,(function(e,a){var n;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:u,cy:h,r0:g,r:M?NaN:d});else{n="area"!==M?0===O&&S?j:e*j:m/w,n<x?(n=x,D-=x):N+=e;var i=T+I*n;t.setItemLayout(a,{angle:n,startAngle:T,endAngle:i,clockwise:A,cx:u,cy:h,r0:g,r:M?Object(p["j"])(e,L,[g,d]):d}),T=i}})),D<m&&w)if(D<=.001){var P=m/w;t.each(n,(function(e,a){if(!isNaN(e)){var n=t.getItemLayout(a);n.angle=P,n.startAngle=f+I*a*P,n.endAngle=f+I*(a+1)*P}}))}else j=D/N,T=f,t.each(n,(function(e,a){if(!isNaN(e)){var n=t.getItemLayout(a),i=n.angle===x?x:e*j;n.startAngle=T,n.endAngle=T+I*i,T+=I*i}}))}))}var w=a("d3f4"),O=a("7fae"),j=a("d498"),A=a("76a5"),M=a("2306"),S=a("4aa2"),L=a("2dc5"),D=a("7d6c"),N=a("e887"),T=a("dce8"),I=a("89b6"),P=a("2355"),_=Math.PI/180;function E(e,t,a,n,i,r,o,l,s,c){if(!(e.length<2)){for(var u=e.length,h=0;h<u;h++)if("outer"===e[h].position&&"labelLine"===e[h].labelAlignTo){var g=e[h].label.x-c;e[h].linePoints[1][0]+=g,e[h].label.x=c}Object(P["d"])(e,s,s+o)&&p(e)}function d(e){for(var r=e.rB,o=r*r,l=0;l<e.list.length;l++){var s=e.list[l],c=Math.abs(s.label.y-a),u=n+s.len,h=u*u,g=Math.sqrt((1-Math.abs(c*c/o))*h);s.label.x=t+(g+s.len2)*i}}function p(e){for(var r={list:[],maxY:0},o={list:[],maxY:0},l=0;l<e.length;l++)if("none"===e[l].labelAlignTo){var s=e[l],c=s.label.y>a?o:r,u=Math.abs(s.label.y-a);if(u>c.maxY){var h=s.label.x-t-s.len2*i,g=n+s.len,p=Math.abs(h)<g?Math.sqrt(u*u/(1-h*h/g/g)):g;c.rB=p,c.maxY=u}c.list.push(s)}d(r),d(o)}}function k(e,t,a,n,i,r,o,l){for(var s=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,g=0;g<e.length;g++){var d=e[g].label;C(e[g])||(d.x<t?(u=Math.min(u,d.x),s.push(e[g])):(h=Math.max(h,d.x),c.push(e[g])))}E(c,t,a,n,1,i,r,o,l,h),E(s,t,a,n,-1,i,r,o,l,u);for(g=0;g<e.length;g++){var p=e[g];d=p.label;if(!C(p)){var f=p.linePoints;if(f){var b="edge"===p.labelAlignTo,m=p.rect.width,v=void 0;v=b?d.x<t?f[2][0]-p.labelDistance-o-p.edgeDistance:o+i-p.edgeDistance-f[2][0]-p.labelDistance:d.x<t?d.x-o-p.bleedMargin:o+i-d.x-p.bleedMargin,v<p.rect.width&&(p.label.style.width=v,"edge"===p.labelAlignTo&&(m=v));var y=f[1][0]-f[2][0];b?d.x<t?f[2][0]=o+p.edgeDistance+m+p.labelDistance:f[2][0]=o+i-p.edgeDistance-m-p.labelDistance:(d.x<t?f[2][0]=d.x+p.labelDistance:f[2][0]=d.x-p.labelDistance,f[1][0]=f[2][0]+y),f[1][1]=f[2][1]=d.y}}}}function C(e){return"center"===e.position}function G(e){var t,a,n=e.getData(),i=[],r=!1,o=(e.get("minShowLabelAngle")||0)*_,l=n.getLayout("viewRect"),s=n.getLayout("r"),c=l.width,u=l.x,h=l.y,g=l.height;function d(e){e.ignore=!0}function f(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}n.each((function(e){var l=n.getItemGraphicEl(e),h=l.shape,g=l.getTextContent(),m=l.getTextGuideLine(),v=n.getItemModel(e),y=v.getModel("label"),x=y.get("position")||v.get(["emphasis","label","position"]),w=y.get("distanceToLabelLine"),O=y.get("alignTo"),j=Object(p["n"])(y.get("edgeDistance"),c),A=y.get("bleedMargin"),M=v.getModel("labelLine"),S=M.get("length");S=Object(p["n"])(S,c);var L=M.get("length2");if(L=Object(p["n"])(L,c),Math.abs(h.endAngle-h.startAngle)<o)return Object(b["j"])(g.states,d),void(g.ignore=!0);if(f(g)){var D,N,I,P,_=(h.startAngle+h.endAngle)/2,E=Math.cos(_),k=Math.sin(_);t=h.cx,a=h.cy;var C,G="inside"===x||"inner"===x;if("center"===x)D=h.cx,N=h.cy,P="center";else{var V=(G?(h.r+h.r0)/2*E:h.r*E)+t,R=(G?(h.r+h.r0)/2*k:h.r*k)+a;if(D=V+3*E,N=R+3*k,!G){var Y=V+E*(S+s-h.r),z=R+k*(S+s-h.r),W=Y+(E<0?-1:1)*L,$=z;D="edge"===O?E<0?u+j:u+c-j:W+(E<0?-w:w),N=$,I=[[V,R],[Y,z],[W,$]]}P=G?"center":"edge"===O?E>0?"right":"left":E>0?"left":"right"}var U=y.get("rotate");if(C="number"===typeof U?U*(Math.PI/180):U?E<0?-_+Math.PI:-_:0,r=!!C,g.x=D,g.y=N,g.rotation=C,g.setStyle({verticalAlign:"middle"}),G){g.setStyle({align:P});var B=g.states.select;B&&(B.x+=g.x,B.y+=g.y)}else{var q=g.getBoundingRect().clone();q.applyTransform(g.getComputedTransform());var F=(g.style.margin||0)+2.1;q.y-=F/2,q.height+=F,i.push({label:g,labelLine:m,position:x,len:S,len2:L,minTurnAngle:M.get("minTurnAngle"),maxSurfaceAngle:M.get("maxSurfaceAngle"),surfaceNormal:new T["a"](E,k),linePoints:I,textAlign:P,labelDistance:w,labelAlignTo:O,edgeDistance:j,bleedMargin:A,rect:q})}l.setTextConfig({inside:G})}})),!r&&e.get("avoidLabelOverlap")&&k(i,t,a,s,c,g,u,h);for(var m=0;m<i.length;m++){var v=i[m],y=v.label,x=v.labelLine,w=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:v.textAlign}),w&&(Object(b["j"])(y.states,d),y.ignore=!0);var O=y.states.select;O&&(O.x+=y.x,O.y+=y.y)}if(x){var j=v.linePoints;w||!j?(Object(b["j"])(x.states,d),x.ignore=!0):(Object(I["c"])(j,v.minTurnAngle),Object(I["b"])(j,v.surfaceNormal,v.maxSurfaceAngle),x.setShape({points:j}),y.__hostTarget.textGuideLineConfig={anchor:new T["a"](j[0][0],j[0][1])})}}}var V=a("7837"),R=a("d32f"),Y=function(e){function t(t,a,n){var i=e.call(this)||this;i.z2=2;var r=new j["a"],o=new A["a"];return i.setTextGuideLine(r),i.setTextContent(o),i.updateData(t,a,n,!0),i}return Object(O["b"])(t,e),t.prototype.updateData=function(e,t,a,n){var i=this,r=e.hostModel,o=e.getItemModel(t),l=o.getModel("emphasis"),s=e.getItemLayout(t),c=Object(b["l"])(Object(R["a"])(o.getModel("itemStyle"),s)||{},s);if(n){i.setShape(c);var u=r.getShallow("animationType");"scale"===u?(i.shape.r=s.r0,M["initProps"](i,{shape:{r:s.r}},r,t)):null!=a?(i.setShape({startAngle:a,endAngle:a}),M["initProps"](i,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},r,t)):(i.shape.endAngle=s.startAngle,M["updateProps"](i,{shape:{endAngle:s.endAngle}},r,t))}else M["updateProps"](i,{shape:c},r,t);i.useStyle(e.getItemVisual(t,"style")),Object(D["z"])(i,o);var h=(s.startAngle+s.endAngle)/2,g=r.get("selectedOffset"),d=Math.cos(h)*g,p=Math.sin(h)*g,f=o.getShallow("cursor");f&&i.attr("cursor",f),this._updateLabel(r,e,t),i.ensureState("emphasis").shape=Object(O["a"])({r:s.r+(l.get("scale")&&l.get("scaleSize")||0)},Object(R["a"])(l.getModel("itemStyle"),s)),Object(b["l"])(i.ensureState("select"),{x:d,y:p,shape:Object(R["a"])(o.getModel(["select","itemStyle"]),s)}),Object(b["l"])(i.ensureState("blur"),{shape:Object(R["a"])(o.getModel(["blur","itemStyle"]),s)});var m=i.getTextGuideLine(),v=i.getTextContent();m&&Object(b["l"])(m.ensureState("select"),{x:d,y:p}),Object(b["l"])(v.ensureState("select"),{x:d,y:p}),Object(D["j"])(this,l.get("focus"),l.get("blurScope"))},t.prototype._updateLabel=function(e,t,a){var n,i=this,r=t.getItemModel(a),o=r.getModel("labelLine"),l=t.getItemVisual(a,"style"),s=l&&l.fill,c=l&&l.opacity;Object(V["f"])(i,Object(V["d"])(r),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:s,defaultOpacity:c,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var u=i.getTextContent();i.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var h=e.get(["label","position"]);"outside"===h||"outer"===h?Object(I["d"])(this,Object(I["a"])(r),{stroke:s,opacity:Object(b["M"])(o.get(["lineStyle","opacity"]),c,1)}):null===(n=i.getTextGuideLine())||void 0===n||n.hide()},t}(S["a"]),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return Object(O["b"])(t,e),t.prototype.init=function(){var e=new L["a"];this._sectorGroup=e},t.prototype.render=function(e,t,a,n){var i,r=e.getData(),o=this._data,l=this.group;if(!o&&r.count()>0){for(var s=r.getItemLayout(0),c=1;isNaN(s&&s.startAngle)&&c<r.count();++c)s=r.getItemLayout(c);s&&(i=s.startAngle)}r.diff(o).add((function(e){var t=new Y(r,e,i);r.setItemGraphicEl(e,t),l.add(t)})).update((function(e,t){var a=o.getItemGraphicEl(t);a.updateData(r,e,i),a.off("click"),l.add(a),r.setItemGraphicEl(e,a)})).remove((function(t){var a=o.getItemGraphicEl(t);M["removeElementWithFadeOut"](a,e,t)})).execute(),G(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=r)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var a=t.getData(),n=a.getItemLayout(0);if(n){var i=e[0]-n.cx,r=e[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}},t.type="pie",t}(N["a"]),W=z,$=a("b1d4"),U=a("6179");function B(e,t,a){t=Object(b["r"])(t)&&{coordDimensions:t}||Object(b["l"])({},t);var n=e.getSource(),i=Object($["a"])(n,t),r=new U["a"](i,e);return r.initData(n,a),r}var q=a("e0d3"),F=a("0f99"),H=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},e.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},e.prototype.getItemVisual=function(e,t){var a=this._getDataWithEncodedVisual();return a.getItemVisual(e,t)},e}(),J=H,X=a("4f85"),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useColorPaletteOnData=!0,t}return Object(O["b"])(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new J(b["c"](this.getData,this),b["c"](this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return B(this,{coordDimensions:["value"],encodeDefaulter:b["h"](F["d"],this)})},t.prototype.getDataParams=function(t){var a=this.getData(),n=e.prototype.getDataParams.call(this,t),i=[];return a.each(a.mapDimension("value"),(function(e){i.push(e)})),n.percent=Object(p["c"])(i,t,a.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},t.prototype._defaultLabelLine=function(e){q["e"](e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(X["a"]),K=Z;function Q(e){e.registerChartView(W),e.registerSeriesModel(K),Object(d["a"])("pie",e.registerAction),e.registerLayout(Object(b["h"])(x,"pie")),e.registerProcessor(Object(w["a"])("pie"))}var ee=a("97ac"),te={props:["Year","Medal","Season"],mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s["a"]([u["a"],h["a"],g["a"],Q,ee["a"]]),t.next=3,fetch("./每年奖牌趋势.json",{cache:"force-cache"}).then((function(e){return e.json()}));case 3:e.dataset=t.sent,e.myChart=c["b"](e.$refs.sunchart),e.reDraw();case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{show:!0,dataset:{},myChart:{},rendered:!1,option:{legend:{top:"5%",left:"center"},tooltip:{trigger:"item",formatter:"<b>{b}</b><br> {c} 枚 | 占比 {d} %"},title:{text:"",top:"57%",left:"center"},series:[]}}},watch:{$route:function(){try{this.Medal=this.$route.params.Medal,this.Year=this.$route.params.Year,this.Season=this.$route.params.Season,this.show=!0,this.reDraw()}catch(e){this.show=!1}}},methods:{sort:function(e){var t=Object.values(e),a=1.3*Math.floor(t.reduce((function(e,t){return e+t}),0)/t.length);return Object.entries(e).reduce((function(e,t){var n=Object(r["a"])(t,2),i=n[0],o=n[1];return o>a?e.push({name:i,value:o}):e[0].value+=o,e}),[{name:"其他国家",value:0}])},reDraw:function(){console.log(this.Season,this.Year,this.Medal);var e,t=this.dataset[this.Season][this.Year][this.Medal];switch(this.Medal){case"Gold":e="金牌";break;case"Silver":e="银牌";break;case"Bronze":e="铜牌";break}this.option.title.text=this.Year+e;var a=this;this.option.series=[t].map((function(e,t){return{type:"pie",radius:["40%","70%"],center:["50%","60%"],itemStyle:{borderRadius:8},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},data:a.sort(e)}})),this.myChart.setOption(this.option),console.log(this.option.series),Object(l["a"])(this.$refs.sunchart,"fadeIn")}}},ae=te,ne=(a("104d"),a("2877")),ie=Object(ne["a"])(ae,n,i,!1,null,"408a4589",null);t["default"]=ie.exports},3835:function(e,t,a){"use strict";function n(e){if(Array.isArray(e))return e}a.d(t,"a",(function(){return l}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function i(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)if(a.push(o.value),t&&a.length===t)break}catch(s){i=!0,r=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw r}}return a}}var r=a("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return n(e)||i(e,t)||Object(r["a"])(e,t)||o()}},"4fad":function(e,t,a){var n=a("23e7"),i=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},9786:function(e,t,a){}}]);
//# sourceMappingURL=chunk-b521e938.ffc51dd2.js.map