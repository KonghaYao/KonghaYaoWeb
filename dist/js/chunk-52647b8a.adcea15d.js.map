{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/dataZoom/helper.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js","webpack:///./node_modules/echarts/lib/component/dataZoom/AxisProxy.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installCommon.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/toolbox/install.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/axisModelCommonMixin.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/coord/axisCommonTypes.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/coord/axisTickLabelBuilder.js","webpack:///./node_modules/echarts/lib/coord/Axis.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/grid/installSimple.js","webpack:///./node_modules/echarts/lib/component/grid/install.js","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./node_modules/core-js/internals/collection-strong.js","webpack:///./node_modules/core-js/internals/collection.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./node_modules/core-js/internals/internal-metadata.js"],"names":["DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","seriesModel","coordType","get","getAxisMainType","axisDim","findEffectedDataZooms","ecModel","payload","foundNewLink","axisRecords","effectedModels","effectedModelMap","eachComponent","mainType","query","dataZoomModel","uid","addToEffected","processSingle","isLinked","dataZoom","set","push","markAxisControlled","isLink","eachTargetAxis","axisIndex","axisIdxArr","DataZoomAxisInfo","this","indexList","indexMap","prototype","add","axisCmptIdx","_super","DataZoomModel","_this","apply","arguments","type","_autoThrottle","_noTarget","_rangePropMode","init","option","parentModel","inputRawOption","retrieveRawOption","settledOption","mergeDefaultAndTheme","_doInit","mergeOption","newOption","thisOption","_setDefaultThrottle","_updateRangeUse","names","index","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","each","axisInfo","length","refering","getReferringComponents","specified","models","axisModel","componentIndex","orient","needAuto","axisModels","findComponents","setParallelAxis","filter","gridModel_1","axModel","dim","hasOwnProperty","globalOption","throttle","animation","animationDurationUpdate","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","getComponent","callback","context","call","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","opt","setCalculatedRange","name","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","keys","i","j","proxy","hostedBy","getRangePropMode","slice","getOrient","dependencies","defaultOption","zlevel","z","filterMode","start","end","Component","ret","SelectDataZoomModel","DataZoomView","render","api","SelectDataZoomView","sliderMove","delta","handleEnds","extent","handleIndex","minSpan","maxSpan","extentSpan","restrict","Math","max","handleSpan","abs","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","sign","span","dist","value","extend","min","Infinity","asc","number","AxisProxy","dimName","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","seriesModels","eachSeries","axisMainType","getMinMaxSpan","_minMaxSpan","calculateDataWindow","hasPropModeValue","dataExtent","_dataExtent","scale","axis","percentExtent","percentWindow","valueWindow","prop","idx","boundPercent","boundValue","parse","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","reset","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","seriesData","getData","dataDims","mapDimensionsAll","filterSelf","dataIndex","leftOut","rightOut","hasValue","thisHasValue","isNaN","thisLeftOut","thisRightOut","setData","map","isInWindow","NaN","range","selectRange","setApproximateExtent","minMaxSpan","minMax","percentSpan","valueSpan","precision","rawExtentInfo","setDeterminedMinMax","toFixed","freeze","rawExtentResult","calculate","dataZoomProcessor","getTargetSeries","eachAxisModel","cb","proxyList","seriesModelMap","overallReset","percentRange","valueRange","startValue","endValue","installDataZoomAction","registers","registerAction","installed","installCommon","registerProcessor","PRIORITY","PROCESSOR","FILTER","registerSubTypeDefaulter","install","registerComponentModel","SelectZoomModel","registerComponentView","SelectZoomView","ToolboxFeature","registerFeature","ctor","getFeature","ToolboxModel","optionUpdated","feature","featureOpt","featureName","Feature","getDefaultOption","layoutMode","ignoreSize","show","left","top","backgroundColor","borderColor","borderRadius","borderWidth","padding","itemSize","itemGap","showTitle","iconStyle","color","emphasis","tooltip","ToolboxView","toolboxModel","group","removeAll","featureOpts","features","_features","featureNames","DataDiffer","_featureNames","processFeature","update","remove","execute","listComponent","getBoundingRect","eachChild","icon","titleText","__title","emphasisState","ensureState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","states","emphasisTextStyle","style","rect","makeFont","offsetX","x","offsetY","y","needPutOnTop","height","getHeight","position","topOffset","width","getWidth","align","newIndex","oldIndex","oldName","featureModel","Model","newTitle","title","isUserFeatureName","onclick","model","dispose","unusable","createIconPaths","setIconStatus","iconName","status","iconPaths","iconStatus","iconsMap","titlesMap","iconStyleModel","getModel","iconStyleEmphasisModel","icons","getIcons","titles","iconStr","path","graphic","setStyle","getItemStyle","pathEmphasisState","text","fill","ignore","setTextContent","tooltipModel","content","formatter","formatterParams","componentType","$vars","on","hoverStyle","defaultTextPosition","stroke","setTextConfig","hide","updateView","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","MouseEvent","env","browser","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","n","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","$a","download","target","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","getLocale","canvasSupported","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","line","bar","stack","seriesIndex","seriesOptGenreator","series","generateNewSeriesTypes","seriesType","subType","seriesId","id","newSeriesOpt","coordSys","coordinateSystem","categoryAxis","getAxesByScale","axisType","boundaryGap","radio","item","tiled","dispatchAction","currentType","data","markPoint","markLine","isStack","echarts","event","BLOCK_SPLITER","Array","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","baseAxis","getBaseAxis","key","valueAxis","getOtherAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","concat","columns","getCategories","rawData","getRawData","mapArray","mapDimension","val","lines","items","assembleOtherSeries","vals","dimensions","argLen","getName","getContentFromModel","result","str","replace","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","categories","header","parseListContents","seriesName","name_1","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","self","e","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","inner","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","queryComponents","pop","head","clear","snapshots","count","store","RestoreOption","from","resetOption","Restore","ATTR","take","zr","resourceKey","userKey","getStore","release","uKey","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","w","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","lineWidth","transformable","brushMode","removeOnClick","baseUID","BrushController","_track","_covers","_handlers","_zr","_uid","pointerHandlers","handler","eventName","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","off","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","attr","rotation","scaleX","scaleY","_transform","getLocalTransform","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","traverse","el","z2","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger","areas","isEnd","shouldShowCover","track","p2","p1","dx","dy","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","silent","draggable","cursor","drift","driftRect","ondragend","nameSequence","opacity","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2","y2","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","useStyle","childOfName","globalDir","getGlobalDirection1","getGlobalDirection2","h","setShape","pointsToRect","clipByPanel","strokeNoScale","formatRectRange","getTransform","localDirName","inverseMap","right","bottom","dir","localDirNameSeq","reverse","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","point","localD","transformCoordToLocal","localZero","clipPath","points","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","_dragging","contain","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","mousemove","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","ends","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","BoundingRect","create","COORD_CONVERTS","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","finder","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","offset","diffProcessor","values","xyMinMax","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","coordSysModel","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","cartesians","getCartesians","cartesian","getAxis","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","xAxisModel","yAxisModel","master","getRect","clone","applyTransform","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","p","axisNameIndex","coordToData","toLocalCoord","toGlobalCoord","dataToCoord","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","_onBrush","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","_dispatchZoomAction","findDataZoom","minValueSpan","maxValueSpan","getExtent","found","dzModel","has","batch","zoom","back","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","$fromToolbox","DataZoom","GridModel","containLabel","AxisModelCommonMixin","getNeedCrossZero","getCoordSysModel","CartesianAxisModel","inverse","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","triggerEvent","axisPointer","axisLine","onZero","onZeroAxisIndex","lineStyle","symbol","symbolSize","axisTick","inside","axisLabel","rotate","showMinLabel","showMaxLabel","margin","fontSize","splitLine","splitArea","areaStyle","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","rich","primary","fontWeight","logAxis","logBase","category","time","log","AXIS_TYPES","axisModelCreator","axisName","BaseAxisModelClass","extraDefaultOption","v","axisDefault","AxisModel","args","_i","inputPositionParams","themeModel","getTheme","getAxisType","__ordinalMeta","OrdinalMeta","createByAxisModel","getOrdinalMeta","Cartesian","_dimList","_axes","getAxes","scaleType","toLowerCase","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","dataToPoint","xScaleSpan","yScaleSpan","translateX","translateY","m","containPoint","axisX","axisY","containData","reserved","out","xVal","yVal","isFinite","xAxis","yAxis","clampData","xScale","yScale","xAxisExtent","yAxisExtent","pointToData","getArea","xExtent","getGlobalExtent","yExtent","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","makeCategoryTicks","ticks","getTicks","tick","labelModel","getLabelModel","makeCategoryLabelsActually","isBlank","labels","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","labelItem","tickValue","labelFormatter","formattedLabel","rawLabel","getLabel","cache","autoInterval","calculateCategoryInterval","params","fetchAutoCategoryIntervalCalculationParams","axisRotate","labelRotate","PI","ordinalScale","ordinalExtent","tickCount","step","floor","unitSpan","unitW","cos","unitH","sin","maxW","maxH","font","dw","dh","axisExtent","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","isHorizontal","getFont","categoryInterval","onlyTick","startTick","round","ceil","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","_extent","coord","getPixelPrecision","setExtent","clamp","normalize","fixExtentWithBands","t","getTicksCoords","getTickModel","ticksCoords","tickVal","getRawOrdinalNumber","fixOnBandTicksCoords","getMinorTicksCoords","minorTickModel","minorTicks","getMinorTicks","minorTicksCoords","minorTicksGroup","getViewLabels","getBandWidth","len","size","nTick","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","littleThan","unshift","a","b","Axis2D","coordExtent","setCategorySortInfo","info","categorySortInfo","setSortInfo","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","_rect","axesMap","_updateScale","onZeroRecords","fixAxisOnZero","resize","ignoreContainLabel","boxLayoutParams","getBoxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axesMapOnDim","getCartesian","coordList","convertToPixel","_findConvertTarget","convertFromPixel","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axisPosition","isCategory","unionExtent","unionExtentFromData","axesModelMap","getTooltipAxes","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","getAxesOnZeroOf","otherAxisOnZeroOf","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","prev","getAreaStyle","tickCoord","anid","shape","autoBatch","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","axisPointerClass","oldAxisGroup","_axisGroup","layout","cartesianAxisHelper","axisBuilder","AxisBuilder","handleAutoShown","elementType","otherAxisType","getGroup","axisElementBuilders","AxisView","splitLineModel","lineStyleModel","lineColors","lineCount","getLineStyle","subPixelOptimize","x1","y1","minorSplitLineModel","k","CartesianXAxisView","CartesianYAxisView","GridView","Rect","extraOption","registerCoordinateSystem","registerPreprocessor","collection","collectionStrong","module","exports","undefined","defineProperty","f","redefineAll","bind","anInstance","iterate","defineIterator","setSpecies","DESCRIPTORS","fastKey","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","getConstructor","wrapper","CONSTRUCTOR_NAME","IS_MAP","ADDER","C","that","iterable","first","AS_ENTRIES","getInternalState","define","previous","state","entry","getEntry","next","removed","forEach","callbackfn","boundFunction","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","iterated","kind","done","$","global","isForced","redefine","InternalMetadataModule","isObject","fails","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","Constructor","exported","fixMethod","KEY","nativeMethod","REPLACE","entries","REQUIRED","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","constructor","forced","setPrototypeOf","$this","Wrapper","NewTarget","NewTargetPrototype","Object","isExtensible","preventExtensions","hiddenKeys","FREEZING","METADATA","setMetadata","it","objectID","weakData","getWeakData","onFreeze"],"mappings":"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","file":"js/chunk-52647b8a.adcea15d.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model';\n\nvar DataZoomAxisInfo =\n/** @class */\nfunction () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n\n  return DataZoomAxisInfo;\n}();\n\nvar DataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomModel, _super);\n\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option; // if (!env.canvasSupported) {\n    //     thisOption.realtime = false;\n    // }\n\n    this._setDefaultThrottle(inputRawOption);\n\n    this._updateRangeUse(inputRawOption);\n\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n\n    this._resetTarget();\n  };\n\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n\n      if (!refering.specified) {\n        return;\n      }\n\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    } // Find axis that parallel to dataZoom as default.\n\n\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false; // Find parallel axes in the same grid.\n\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      } // else remain its original setting.\n\n    });\n  };\n\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n\n\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n\n\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n\n    this._updateRangeUse(opt);\n  };\n\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n\n\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n\n\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var firstProxy;\n\n    var axisDimList = this._targetAxisInfoMap.keys();\n\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    } // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n\n\n    return firstProxy;\n  };\n\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n\n    return this._orient;\n  };\n\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve the those raw params from option, which will be cached separately.\n * becasue they will be overwritten by normalized/calculated values in the main\n * process.\n */\n\n\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar DataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomView, _super);\n\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\n\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param delta Move length.\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\n * @param minSpan The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param maxSpan The range of dataZoom can not be larger than that.\n * @return The input handleEnds.\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../helper/sliderMove';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo';\nimport { getAxisMainType, isCoordSupported } from './helper';\nimport { SINGLE_REFERRING } from '../../util/model';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\n\nvar AxisProxy =\n/** @class */\nfunction () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel; // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n\n\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n\n\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n\n\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n\n\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n\n\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // this.hasSeriesStacked = false;\n    // each(targetSeries, function (series) {\n    // let data = series.getData();\n    // let dataDim = data.mapDimension(this._dimName);\n    // let stackedDimension = data.getCalculationInfo('stackedDimension');\n    // if (stackedDimension && stackedDimension === dataDim) {\n    // this.hasSeriesStacked = true;\n    // }\n    // }, this);\n    // `calculateDataWindow` uses min/maxSpan.\n\n    this._updateMinMaxSpan();\n\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n    this._setAxisModel();\n  };\n\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n      if (!dataDims.length) {\n        return;\n      }\n\n      if (filterMode === 'weakFilter') {\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = seriesData.get(dataDims[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow; // console.time('select');\n\n            seriesData.selectRange(range); // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n\n    if (!percentWindow) {\n      return;\n    } // [0, 500]: arbitrary value, guess axis extent.\n\n\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n\n    rawExtentInfo.freeze();\n  };\n\n  return AxisProxy;\n}();\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  }); // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\n\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport { getAxisMainType } from './helper';\nimport AxisProxy from './AxisProxy';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    } // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n\n\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      }); // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper';\nimport { each } from 'zrender/lib/core/util';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor';\nimport installDataZoomAction from './dataZoomAction';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel';\nimport SelectZoomView from './SelectZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as featureManager from './featureManager';\nimport ComponentModel from '../../model/Component';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n\n      if (feature instanceof ToolboxFeature) {\n        if (!featureName && oldName) {\n          feature.dispose && feature.dispose(ecModel, api);\n          return;\n        }\n\n        if (!featureModel.get('show') || feature.unusable) {\n          feature.remove && feature.remove(ecModel, api);\n          return;\n        }\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        var tooltipModel = toolboxModel.getModel('tooltip');\n\n        if (tooltipModel && tooltipModel.get('show')) {\n          path.tooltip = zrUtil.extend({\n            content: titlesMap[iconName],\n            formatter: tooltipModel.get('formatter', true) || function () {\n              return titlesMap[iconName];\n            },\n            formatterParams: {\n              componentType: 'toolbox',\n              name: iconName,\n              title: titlesMap[iconName],\n              $vars: ['name', 'title']\n            },\n            position: tooltipModel.get('position', true) || 'bottom'\n          }, tooltipModel.option);\n        } // graphic.enableHoverEmphasis(path);\n\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array */\n\nimport env from 'zrender/lib/core/env';\nimport { ToolboxFeature } from '../featureManager';\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    }); // Chrome, Firefox, New Edge\n\n    if (typeof MouseEvent === 'function' && (env.browser.newEdge || !env.browser.ie && !env.browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = atob(bstr));\n          var filename = title + '.' + type;\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]);\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocale(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocale(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { SINGLE_REFERRING } from '../../../util/model';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocale(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: type,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { addEventListener } from 'zrender/lib/core/event';\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (typeof optionToContent === 'function') {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (typeof htmlOrDom === 'string') {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (typeof contentToOption === 'function') {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocale(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocale(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as history from '../../dataZoom/history';\nimport { ToolboxFeature } from '../featureManager';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocale(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util';\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as graphic from '../../util/graphic';\nimport * as interactionMutex from './interactionMutex';\nimport DataDiffer from '../../data/DataDiffer';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { onIrrelevantElement } from './cursorHelper';\nimport * as graphicUtil from '../../util/graphic';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as brushHelper from './brushHelper';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model';\nvar COORD_CONVERTS = ['dataToPoint', 'pointToData']; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange) {\n    var xminymin = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]]);\n    var xmaxymax = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]]);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = coordSys[COORD_CONVERTS[to]](item);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i])) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../../helper/BrushController';\nimport BrushTargetManager from '../../helper/BrushTargetManager';\nimport * as history from '../../dataZoom/history';\nimport sliderMove from '../../helper/sliderMove';\nimport { ToolboxFeature } from '../featureManager';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocale(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n\n  if (!toolboxModel) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(['feature', 'dataZoom']);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect';\nimport ToolboxModel from './ToolboxModel';\nimport ToolboxView from './ToolboxView'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager';\nimport SaveAsImage from './feature/SaveAsImage';\nimport MagicType from './feature/MagicType';\nimport DataView from './feature/DataView';\nimport Restore from './feature/Restore';\nimport DataZoom from './feature/DataZoom';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModelCommonMixin =\n/** @class */\nfunction () {\n  function AxisModelCommonMixin() {}\n\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n\n\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n\n  return AxisModelCommonMixin;\n}();\n\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  scale: true,\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout';\nimport OrdinalMeta from '../data/OrdinalMeta';\nimport { AXIS_TYPES } from './axisCommonTypes';\nimport { each, merge } from 'zrender/lib/core/util';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var _this = _super.apply(this, args) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Cartesian from './Cartesian';\nimport { invert } from 'zrender/lib/core/matrix';\nimport { applyTransform } from 'zrender/lib/core/vector';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, reserved, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, out) {\n    out = out || [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport { makeInner } from '../util/model';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper';\nvar inner = makeInner();\nexport function createAxisLabels(axis) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\n * @param {module:echats/coord/Axis} axis\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n * @return {Object} {\n *     ticks: Array.<number>\n *     tickCategoryInterval: number\n * }\n */\n\nexport function createAxisTicks(axis, tickModel) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\n\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\n\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var labels;\n  var numericLabelInterval;\n\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\n\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var ticks;\n  var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  } // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n      var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n      tickCategoryInterval = labelsResult.labelCategoryInterval;\n      ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n        return labelItem.tickValue;\n      });\n    } else {\n      tickCategoryInterval = optionTickInterval;\n      ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n    } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\n\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\n\nfunction getListCache(axis, prop) {\n  // Because key can be funciton, and cache size always be small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\n\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\n\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\n\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\n\n\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n\n  var tickCount = ordinalScale.count();\n\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n\n  var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0; // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top'); // Magic number\n\n    width = rect.width * 1.3;\n    height = rect.height * 1.3; // Min size, void long loop.\n\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n\n  var dw = maxW / unitW;\n  var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hiden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  } // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n      cache.axisExtent0 = axisExtent[0];\n      cache.axisExtent1 = axisExtent[1];\n    }\n\n  return interval;\n}\n\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\n\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  } // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n\n\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n  var tickValue = startTick;\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n\n  return result;\n}\n\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util';\nimport { linearMap, getPixelPrecision, round } from '../util/number';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n */\n\nvar Axis =\n/** @class */\nfunction () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n\n\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n\n\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\n   * Get coord extent.\n   */\n\n\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n\n\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n\n\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n\n\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n\n\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overrided to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n\n\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n\n\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overrided, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n\n\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n\n  return Axis;\n}();\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n} // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\n\n\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[0]\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n    };\n    ticksCoords.push(last);\n  }\n\n  var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\n\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3 } from 'zrender/lib/core/util';\nimport { getLayoutRect } from '../../util/layout';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D';\nimport Axis2D from './Axis2D';\nimport { SINGLE_REFERRING } from '../../util/model';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    each(axesMap.x, function (xAxis) {\n      niceScaleExtent(xAxis.scale, xAxis.model);\n    });\n    each(axesMap.y, function (yAxis) {\n      niceScaleExtent(yAxis.scale, yAxis.model);\n    }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0]; // if (axisIndex == null) {\n      //     Find first axis\n      //     for (let name in axesMapOnDim) {\n      //         if (axesMapOnDim.hasOwnProperty(name)) {\n      //             return axesMapOnDim[name];\n      //         }\n      //     }\n      // }\n      // return axesMapOnDim[axisIndex];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n        var grid = gridModel.coordinateSystem;\n\n        if (grid === this) {\n          cartesian = this._coordsList[0];\n        }\n      }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n\n        if (data.type === 'list') {\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\n\n          if (otherAxisType === 'value' || otherAxisType === 'log') {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport GridModel from '../../coord/cartesian/GridModel';\nimport { Rect } from '../../util/graphic';\nimport { defaults } from 'zrender/lib/core/util';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport Grid from '../../coord/cartesian/Grid';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        nativeMethod.call(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        nativeMethod.call(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n"],"sourceRoot":""}